<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="OwnTracks.org">
  <link rel="canonical" href="http://owntracks.org/features/encrypt/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Encryption - OwnTracks Booklet</title>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Encryption";
    var mkdocs_page_input_path = "features/encrypt.md";
    var mkdocs_page_url = "/features/encrypt/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OwnTracks Booklet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Intro</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/whathow/">What it does</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/clients/">Clients</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/scenarios/">Scenarios</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/apps/">Apps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/topics/">Topics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/broker/">Broker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/bridge/">Bridging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/waypoints/">Waypoints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/beacons/">Beacons</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Features</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../comparison/">Comparison</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ios/">iOS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../android/">Android</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tls/">TLS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tlscert/">TLS client</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../location/">Location</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tid/">Tracker ID</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../friends/">Friends</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../card/">Card</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../waypoints/">Waypoints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../beacons/">Beacons</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pedometer/">Pedometer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../featured/">Featured</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Encryption</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#recorder">Recorder</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../remoteconfig/">Remoteconfig</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debug/">Debugging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../traccar/">Traccar</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/json/">JSON</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/http/">HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/mqtt/">MQTT</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/qr/">URIs and QR codes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/program/">Code</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Sundry</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../terminology/">Terminology</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../clients/recorder/">Docker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../privacy/">Privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../people/">People</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../ideas/">Ideas</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../faq/">Answers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../press/">Press</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OwnTracks Booklet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Encryption</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/owntracks/edit/master/docs/features/encrypt.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h2 id="payload-encryption">Payload encryption</h2>
<p>In addition to the <a href="../tls/">transport encryption via TLS</a>, the OwnTracks apps support payload encryption using <a href="https://github.com/jedisct1/libsodium/">libsodium</a>, in particular <a href="https://download.libsodium.org/doc/secret-key_cryptography/authenticated_encryption.html">secret-key authenticated encryption</a>. We have also implemented support for payload encryption (i.e. decryption) in the <a href="https://github.com/owntracks/recorder">OwnTracks Recorder</a>.</p>
<p>You configure a <em>secret</em> (which you keep secret) in the app's settings. From this moment onwards, the apps encrypt the <a href="../../tech/json/">JSON</a> with this secret and transport the payload in a new JSON object which looks like this:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;encrypted&quot;,
  &quot;data&quot;: &quot;1Vu7Owp ... W4lMnh28FB+el22GsCrlnggvEcp4H8GR9iKJdi1qfwkejYpzrQ+491Mwunjg=&quot;
}
</code></pre>
<p>If you want to share location with a friend, both you and your friend need to share the same <em>secret</em>. A <em>secret</em> should be kept secret; it is an up to 32 octet long passphrase (which the apps pad with binary zeroes) which is required both for encryption as well as for decryption of the payloads. It is not possible to share locations with a friend's device using different <em>secret</em> keys.</p>
<h3 id="recorder">Recorder</h3>
<p>You can set up multiple decryption keys on the Recorder (but not in the apps). This is to enable, say, different people to use different secrets on the same Recorder.</p>
<p>Add a key by determining the <em>username</em> and the <em>device name</em> of the client app. Lowercase these, and create a string with the two values separated with a dash. Suppose the <em>username</em> is <code>jjolie</code> and the <em>device name</em> is <code>Phone</code>, the result will be <code>jjolie-phone</code>.</p>
<p>Load the key into the (running) Recorder:</p>
<pre><code class="language-bash">echo &quot;jjolie-phone mysecreTpass01&quot; | ocat --load=keys
</code></pre>
<p>From this moment onwards, the Recorder will use this secret key for this username/device combination when it receives JSON payloads of <code>_type: encrypted</code>. The Recorder will decrypt the payload and will store the result in plain text in its storage.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../remoteconfig/" class="btn btn-neutral float-right" title="Remoteconfig">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../featured/" class="btn btn-neutral" title="Featured"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/owntracks/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../featured/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../remoteconfig/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
