<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Location - OwnTracks Booklet</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/custom.css" rel="stylesheet">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OwnTracks Booklet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Intro</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/whathow/">What it does</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/clients/">Clients</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/scenarios/">Scenarios</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/apps/">Apps</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/topics/">Topics</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/broker/">Broker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/bridge/">Bridging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/beacons/">Beacons</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../comparison/">Comparison</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ios/">iOS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../android/">Android</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tls/">TLS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tlscert/">TLS client</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Location</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#location-data">Location data</a></li>
                
                    <li><a class="toctree-l4" href="#ios">iOS</a></li>
                
                    <li><a class="toctree-l4" href="#android">Android</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tid/">Tracker ID</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../friends/">Friends</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../card/">Card</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../beacons/">Beacons</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pedometer/">Pedometer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../featured/">Featured</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../encrypt/">Encryption</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../remoteconfig/">Remoteconfig</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../debug/">Debugging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../traccar/">Traccar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/json/">JSON</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/http/">HTTP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/mqtt/">MQTT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/qr/">QR</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/program/">Code</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Sundry</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../terminology/">Terminology</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../clients/recorder/">Docker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../privacy/">Privacy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../people/">People</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ideas/">Ideas</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../faq/">Answers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../press/">Press</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OwnTracks Booklet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Location</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/owntracks" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="location-data">Location data</h2>
<p>Location data is obtained by your smartphone and published to the <a href="../../guide/broker/">MQTT broker</a> as follows:</p>
<p>The Android and iOS apps offer 4 modes of location publication as well as region monitoring:</p>
<ul>
<li><em>Quiet</em> mode: Only manual location reports. Icon <code>[]</code></li>
<li><em>Manual</em> mode: Manual location reports and automated reports with region monitoring. Icon <code>||</code></li>
<li><em>Significant location change</em> mode: Standard tracking mode with automated location reports. Icon <code>|&gt;</code></li>
<li><em>Move</em> mode: Frequent location  <code>||&gt;</code></li>
</ul>
<p>All four modes work the same but behave slightly different on iOS or Android. In addition to region monitoring, iOS also supports location reporting based on iBeacons. </p>
<h3 id="ios">iOS</h3>
<h4 id="move-mode"><em>Move</em> mode</h4>
<p>In <em>move</em> mode, the app monitors location permanently and publishes a new
location as soon as the device moves <code>x</code> meters or after <code>t</code> seconds, whatever
happens first. <code>x</code> and <code>t</code> can be adjusted by the user in the systems settings for
OwnTracks. The defaults are 100m and 300 seconds (5 minutes). </p>
<p>The payoff is higher battery usage as high as in navigation or tracker app.
So it is recommend to use <em>move</em> mode while charging or during moves only - hence the name.</p>
<p>Please note, <em>move</em> mode is active when the app is active (a.k.a in foreground).</p>
<h4 id="significant-location-change-mode"><em>Significant location change</em> mode</h4>
<p>iOS defines a <em>Significant location change</em> as traveling a distance of at least
500 meters in 5 minutes.  This mode allows the app to run in background and
minimize the power consumption.</p>
<p>This standard tracking mode reports significant location changes only (&gt;500m
and at most once every 5 minutes).  This is defined by Apple and is optimal
with respect to battery usage.</p>
<p>Examples:</p>
<ul>
<li>if you don't move, no new location is published - even if you don't move for hours. (Note, however, that the app will publish a <em>ping</em>-type message once in a while.)</li>
<li>if you move at least 500 meters, a new location will be published after 5 minutes</li>
<li>if you move 10 kilometers in 5 minutes, only one location will be published</li>
</ul>
<h4 id="manual-mode"><em>Manual</em> mode</h4>
<p>The app doesn't monitor location changes in <em>manual</em> mode while in background.
The user has to publish the current location explicitly via the UI. You use this if
you want to (temporarily) avoid friends seeing where you are. Note that Region events
triggered by entering or leaving Geo Fence or Beacon regions
are still published automatically whilst in <em>Manual</em> mode.</p>
<h4 id="quiet-mode"><em>Quiet</em> mode</h4>
<p>Same as <em>Manual</em> mode except that no region events are published.</p>
<h4 id="region-monitoring"><em>Region</em> monitoring</h4>
<p>The app user may mark a previously manually published or manually created 
location as a monitored circular region by specifying a monitoring radius in meters. (See <a href="../waypoints/">Waypoints</a>.)
The app will publish the location
additionally every time the device leaves or enters one of the regions, and the
published data contains an indication of whether the device is entering or
leaving the region.</p>
<p>Region monitoring is not related to one of the location publication modes and
works independently thereof. It is switched on when a region is setup with description
and radius. To switch region monitoring off, all regions have to be 
unmarked (by setting their radius to 0).</p>
<p>Regions are shown on the map display in transparent blue or red circles. Red
indicates the device is is within the region.</p>
<h4 id="ibeacon-monitoring">iBeacon monitoring</h4>
<p>The app user may mark a previously manually published or manually created location
as a monitored beacon region by appending a beacon UUID to the region's name.
The app will publish the location
additionally every time the device leaves or enters one of the beacon regions, and the
published data contains an indication of whether the device is entering or
leaving the region.</p>
<p>Region monitoring is not related to one of the location publication modes and
works independently. It is switched on when a region's name has a valid UUID
appended to it.</p>
<p>If the device is within a monitored beacon region, the the beacon indicator
is shown in red, otherwise blue meaning device is not in any iBeacon region.</p>
<p>There are 2 kinds of locations:</p>
<ul>
<li>an <em>automatic location</em> created when iOS detects a change of location</li>
<li>a <em>manual location</em> created by the user</li>
</ul>
<p>A <em>manual location</em> with a non-zero length remark (description) is a <em>waypoint</em>.</p>
<p>A <em>waypoint</em>'s attributes are published when the waypoint is created or changed.</p>
<p>If a <em>waypoint</em> specifies a radius, a <em>circular region</em> is monitored for <em>enter/leave events</em>.</p>
<p>If a <em>waypoint</em> is not a <em>circular region</em> and the waypoint's description contains a valid iBeacon specification, a <em>beacon region</em> is monitored for enter/leave events.</p>
<p>If an enter/leave event occurs an event message is published with the <code>type</code> attribute set to <code>c</code>or <code>b</code>for (<em>circular region_or _beacon region</em>). The message contains an <code>event</code> attribute specifying either <code>enter</code>or <code>leave</code>.</p>
<p>The description of the <em>waypoint</em> is added to the published <code>event</code> message.</p>
<table>
<thead>
<tr>
<th>Automatic</th>
<th>Description</th>
<th>iBeacon</th>
<th>Radius</th>
<th>Event Message</th>
<th>/w Description</th>
<th>Waypoint Message</th>
</tr>
</thead>
<tbody>
<tr>
<td>Y</td>
<td>n/a</td>
<td>n/a</td>
<td>n/a</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>N</td>
<td>n/a</td>
<td>n/a</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td><code>c</code></td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td><code>c</code></td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td><code>b</code></td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td><code>b</code></td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td><code>c</code></td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td><code>c</code></td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>
<h3 id="android">Android</h3>
<h4 id="move-mode_1"><em>Move</em> mode</h4>
<p>In <em>move</em> mode, the app monitors device location permanently. It requests a location fix every 30s in high power mode and publishes a new location as soon as it arrives but at most every 10 seconds. </p>
<p>This mode mostly relies on GPS location data and is hence the most accurate. The payoff is a higher battery usage.
It is recommend to use <em>move</em> mode while charging or during periods that require highly accurate tracking while moving quickly. </p>
<p>The <code>locatorDisplacement</code> option is ignored in this mode.</p>
<h4 id="significant-location-change-mode_1"><em>Significant location change</em> mode</h4>
<p>This standard tracking mode is aimed at everyday usage for location tracking in the background. It uses a balanced power location request that gathers a new location fix every 15 minutes. Location data from other apps is reused and published as soon as it arrives but at most every 10 seconds. </p>
<p>This mode relies mostly on cell tower and WiFi location to conserve power to provide location data that is sufficiently accurate for most users. </p>
<p>In addition to the default settings, all location request parameters in this mode can also be changed. These parameters directly influence the raw <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest">location request</a> that is send to the Android location API.  </p>
<ul>
<li>
<p><code>locatorInterval</code>: The <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-locationrequest-setinterval-long-millis">desired interval</a> for active location updates.</p>
<blockquote>
<p>"The location client will actively try to obtain location updates for your application at this interval, so it has a direct influence on the amount of power used by your application. Choose your interval wisely."</p>
</blockquote>
</li>
<li>
<p><code>locatorDisplacement</code>: The smallest displacement in meters the user must move between location updates. Defaults to 0 and is an <code>and</code> relationship with interval. Can be used to only receive updates when the device has moved.</p>
<ul>
<li>This means if the user has not moved by more than the displacement value, the location will not be reported at <code>locatorInterval</code>.</li>
</ul>
</li>
<li>
<p><code>locatorPriority</code>: The priority of the request is a strong hint to the LocationClient for which location sources to use (e.g. wifi, cellular or gps). The accepted values are:</p>
<ul>
<li><code>0</code>: <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-static-final-int-priority_no_power">No power usage</a> "No locations will be returned unless a different client has requested location updates"</li>
<li><code>1</code>: <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-static-final-int-priority_low_power">Low power usage</a> "City level accuracy is considered to be about 10km accuracy."</li>
<li><code>2</code>: <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-static-final-int-priority_balanced_power_accuracy">Balanced power usage</a> "Block level accuracy is considered to be about 100 meter accuracy." (default)</li>
<li><code>3</code>: <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-static-final-int-priority_high_accuracy">High power usage</a> "This will return the finest location available."</li>
</ul>
</li>
</ul>
<h4 id="manual-mode_1"><em>Manual</em> mode</h4>
<p>In <em>manual</em> mode, the app monitors device location with a low power location request. It uses the same interval configured for <em>significant mode</em> to receive low accuracy updates to use minimal battery power. </p>
<p>The user has to publish the current location explicitly via the UI. You use this if you want to (temporarily) avoid friends seeing where you are. Note that Region events triggered by entering or leaving Geo Fence are still published automatically whilst in <em>Manual</em> mode.</p>
<p>Remote <code>reportLocation</code> commands are ignored. </p>
<h4 id="quiet-mode_1"><em>Quiet</em> mode</h4>
<p>Same as <em>Manual</em> mode except that no region events are published.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tid/" class="btn btn-neutral float-right" title="Tracker ID"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tlscert/" class="btn btn-neutral" title="TLS client"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../tlscert/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tid/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
