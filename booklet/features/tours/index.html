<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="OwnTracks.org" /><link rel="canonical" href="http://owntracks.org/features/tours/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Tours - OwnTracks Booklet</title>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link href="../../extra.css" rel="stylesheet">
    
      <script>
        // Current page data
        var mkdocs_page_name = "Tours";
        var mkdocs_page_input_path = "features/tours.md";
        var mkdocs_page_url = "/features/tours/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> OwnTracks Booklet
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Intro</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../guide/whathow/">What it does</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../guide/quicksetup/">Quicksetup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../guide/apps/">Apps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../comparison/">Comparison</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../location/">Location</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tech/json/">JSON</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tech/http/">HTTP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tech/program/">Code</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Sundry</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../privacy/">Privacy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../people/">People</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/">Answers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../press/">Press</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">OwnTracks Booklet</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Tours</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/owntracks/booklet/edit/master/docs/features/tours.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="tours-location-sharing">Tours: Location Sharing<a class="headerlink" href="#tours-location-sharing" title="Permanent link">#</a></h2>
<p>Currently: iOS and Recorder only.
Requires: enabled remote CMD on device.</p>
<p>You might occasionally wish to share your location with somebody who doesn't have OwnTracks. For these situations you can set up what we call a <em>Tour</em> -- a time-limited view of your location which can be viewed from a Web browser.</p>
<p>The OwnTracks Recorder gets a request for a Tour as a JSON published to the <code>../request</code> subtopic or POSTed to the HTTP endpoint:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;tour&quot;,
  &quot;tour&quot;: {
    &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
    &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
    &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;
  }
}
</code></pre>
<p>The Recorder creates a View from this and returns a unique URL to this View which you can share with anybody you want to.</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;cmd&quot;,
  &quot;action&quot;: &quot;response&quot;,
  &quot;request&quot;: &quot;tour&quot;,
  &quot;status&quot;: 200,
  &quot;tour&quot;: {
       &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
       &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
       &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;,
       &quot;uuid&quot;: &quot;7fc09e95-0082-4f2e-b3ee-bd68e39a39fe&quot;,
       &quot;url&quot;: &quot;http://localhost:8085/view/7fc09e95-0082-4f2e-b3ee-bd68e39a39fe&quot;
}
</code></pre>
<p>Your last location is marked on this View's map with a red dot and the track of your movements between the <code>from</code> and <code>to</code> times can be loaded. The important bit: the visitor of the unique URL will not see your location prior to the specified <code>from</code> time nor after the <code>to</code> time. It is also possible to completely delete the Tour in which case a user attempting to access it would get a 404 Not Found. Tours can outlive the <code>to</code> field if you want to, say, provide a historic map of where you once were (i.e. <em>My 2019 vacation on Mallorca</em>).</p>
<p>An authorized client may also request a list of current Tours with this JSON:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;tours&quot;
}
</code></pre>
<p>whereupon an array of existing Tours and their unique URLs is returned:</p>
<pre><code class="language-json">{
 &quot;_type&quot;: &quot;cmd&quot;,
 &quot;action&quot;: &quot;response&quot;,
 &quot;request&quot;: &quot;tours&quot;,
 &quot;tours&quot;: [
  {
   &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
   &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
   &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;,
   &quot;uuid&quot;: &quot;0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;,
   &quot;url&quot;: &quot;http://localhost:8085/view/0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;
  }
 ],
 &quot;ntours&quot;: 1
}
</code></pre>
<p>Only Tours which have been created by a user for their specific device will be enumerated in the Tours list.</p>
<p>Tours can be "un-toured" (i.e. deleted) with this payload:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;untour&quot;,
  &quot;uuid&quot;: &quot;0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;
}
</code></pre>
<p>For Tours to work, the Recorder needs to be compiled with support for HTTP and TOURS, and the following settings need defining:</p>
<ul>
<li><code>OTR_HTTPPREFIX</code> must be configured to contain the URL to the Recorder as seen from "outside", i.e. from the Internet. This setting is used to construct the unique URL which will be returned for a Tour. So, if you have, say, a Recorder behind an NGINX proxy (as described in our README), then the setting would say
   <code>console
   export OTR_HTTPPREFIX="https://example.net/owntracks"</code>
   on the other hand, if you're testing internally and your Recorder is listening on port 8085, you might do this:
   <code>console
   export OTR_HTTPPREFIX="http://localhost:8085"</code></li>
</ul>
<p>Furthermore, the Recorder needs to be able to PUBLISH tour data back to the broker, so an ACL such as the following will be required:</p>
<pre><code>topic write owntracks/+/+/cmd
</code></pre>
<p>Initially we thought the term "share" would be good but then decided it's a too ambiguous word, and we didn't want to run into the mess we created with mixing terms (remember region and waypoint? :-) ). After a bit of pondering we think the word tour as in ("I did a tour last year I want to show you") or as in ("I am now on tour") is adequate.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/owntracks/booklet" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
