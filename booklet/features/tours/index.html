<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="OwnTracks.org">
  <link rel="canonical" href="http://owntracks.org/features/tours/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Tours - OwnTracks Booklet</title>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Tours";
    var mkdocs_page_input_path = "features/tours.md";
    var mkdocs_page_url = "/features/tours/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OwnTracks Booklet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Intro</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/whathow/">What it does</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/clients/">Clients</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/scenarios/">Scenarios</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/apps/">Apps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/topics/">Topics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/broker/">Broker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/bridge/">Bridging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/waypoints/">Waypoints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../guide/beacons/">Beacons</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Features</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../comparison/">Comparison</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ios/">iOS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../android/">Android</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tls/">TLS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tlscert/">TLS client</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../location/">Location</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tid/">Tracker ID</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../friends/">Friends</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../card/">Card</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Tours</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../waypoints/">Waypoints</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../beacons/">Beacons</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pedometer/">Pedometer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../featured/">Featured</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../encrypt/">Encryption</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../remoteconfig/">Remoteconfig</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debug/">Debugging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../traccar/">Traccar</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/json/">JSON</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/http/">HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/mqtt/">MQTT</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/qr/">URIs and QR codes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tech/program/">Code</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Sundry</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../terminology/">Terminology</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../clients/recorder/">Docker</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../privacy/">Privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../people/">People</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../ideas/">Ideas</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../faq/">Answers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../press/">Press</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OwnTracks Booklet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Tours</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/owntracks/booklet/edit/master/docs/features/tours.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h2 id="tours-location-sharing">Tours: Location Sharing</h2>
<p>You might occasionally wish to share your location with somebody who doesn't have OwnTracks. For these situations you can set up what we call a <em>Tour</em> -- a time-limited view of your location which can be viewed from a Web browser.</p>
<p>The OwnTracks Recorder gets a request for a Tour as a JSON published to the <code>../request</code> subtopic or POSTed to the HTTP endpoint:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;tour&quot;,
  &quot;tour&quot;: {
    &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
    &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
    &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;
  }
}
</code></pre>
<p>The Recorder creates a View from this and returns a unique URL to this View which you can share with anybody you want to.</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;cmd&quot;,
  &quot;action&quot;: &quot;response&quot;,
  &quot;request&quot;: &quot;tour&quot;,
  &quot;status&quot;: 200,
  &quot;tour&quot;: {
       &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
       &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
       &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;,
       &quot;uuid&quot;: &quot;7fc09e95-0082-4f2e-b3ee-bd68e39a39fe&quot;,
       &quot;url&quot;: &quot;http://localhost:8085/view/7fc09e95-0082-4f2e-b3ee-bd68e39a39fe&quot;
}
</code></pre>
<p>Your last location is marked on this View's map with a red dot and the track of your movements between the <code>from</code> and <code>to</code> times can be loaded. The important bit: the visitor of the unique URL will not see your location prior to the specified <code>from</code> time nor after the <code>to</code> time. It is also possible to completely delete the Tour in which case a user attempting to access it would get a 404 Not Found. Tours can outlive the <code>to</code> field if you want to, say, provide a historic map of where you once were (i.e. <em>My 2019 vacation on Mallorca</em>).</p>
<p>An authorized client may also request a list of current Tours with this JSON:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;tours&quot;
}
</code></pre>
<p>whereupon an array of existing Tours and their unique URLs is returned:</p>
<pre><code class="language-json">{
 &quot;_type&quot;: &quot;cmd&quot;,
 &quot;action&quot;: &quot;response&quot;,
 &quot;request&quot;: &quot;tours&quot;,
 &quot;tours&quot;: [
  {
   &quot;label&quot;: &quot;Meeting with C. in Essen&quot;,
   &quot;from&quot;: &quot;2022-08-01T05:35:58&quot;,
   &quot;to&quot;: &quot;2022-08-02T15:00:58&quot;,
   &quot;uuid&quot;: &quot;0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;,
   &quot;url&quot;: &quot;http://localhost:8085/view/0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;
  }
 ],
 &quot;ntours&quot;: 1
}
</code></pre>
<p>Only Tours which have been created by a user for their specific device will be enumerated in the Tours list.</p>
<p>Tours can be "un-toured" (i.e. deleted) with this payload:</p>
<pre><code class="language-json">{
  &quot;_type&quot;: &quot;request&quot;,
  &quot;request&quot;: &quot;untour&quot;,
  &quot;uuid&quot;: &quot;0a721022-c54a-49a4-9f5a-f1a76dd92e9e&quot;
}
</code></pre>
<p>For Tours to work, the Recorder needs to be compiled with support for HTTP and TOURS, and the following settings need defining:</p>
<ul>
<li><code>OTR_HTTPPREFIX</code> must be configured to contain the URL to the Recorder as seen from "outside", i.e. from the Internet. This setting is used to construct the unique URL which will be returned for a Tour. So, if you have, say, a Recorder behind an NGINX proxy (as described in our README), then the setting would say
   <code>console
   export OTR_HTTPPREFIX="https://example.net/owntracks"</code>
   on the other hand, if you're testing internally and your Recorder is listening on port 8085, you might do this:
   <code>console
   export OTR_HTTPPREFIX="http://localhost:8085"</code></li>
</ul>
<p>Initially we thought the term "share" would be good but then decided it's a too ambiguous word, and we didn't want to run into the mess we created with mixing terms (remember region and waypoint? :-) ). After a bit of pondering we think the word tour as in ("I did a tour last year I want to show you") or as in ("I am now on tour") is adequate.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../waypoints/" class="btn btn-neutral float-right" title="Waypoints">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../card/" class="btn btn-neutral" title="Card"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/owntracks/booklet/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../card/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../waypoints/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
