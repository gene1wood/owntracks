<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Android - OwnTracks Booklet</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/custom.css" rel="stylesheet">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OwnTracks Booklet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Intro</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/whathow/">What it does</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/clients/">Clients</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/scenarios/">Scenarios</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/apps/">Apps</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/topics/">Topics</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/broker/">Broker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/bridge/">Bridging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/beacons/">Beacons</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../comparison/">Comparison</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ios/">iOS</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Android</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#general-restrictions-on-android-6-and-higher">General Restrictions on Android 6 and higher.</a></li>
                
            
                <li class="toctree-l3"><a href="#vendor-background-restrictions">Vendor background restrictions</a></li>
                
            
                <li class="toctree-l3"><a href="#google-play-services">Google Play Services</a></li>
                
            
                <li class="toctree-l3"><a href="#setup">Setup</a></li>
                
            
                <li class="toctree-l3"><a href="#debug-log">Debug Log</a></li>
                
            
                <li class="toctree-l3"><a href="#automation-via-tasker-automagic-etc">Automation via Tasker, Automagic, etc.</a></li>
                
                    <li><a class="toctree-l4" href="#tasker-example">Tasker example:</a></li>
                
                    <li><a class="toctree-l4" href="#automagic-example">Automagic example:</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tls/">TLS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tlscert/">TLS client</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../location/">Location</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tid/">Tracker ID</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../friends/">Friends</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../card/">Card</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../beacons/">Beacons</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pedometer/">Pedometer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../featured/">Featured</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../encrypt/">Encryption</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../remoteconfig/">Remoteconfig</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../debug/">Debugging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../traccar/">Traccar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/json/">JSON</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/http/">HTTP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/mqtt/">MQTT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/qr/">URIs and QR codes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/program/">Code</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Sundry</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../terminology/">Terminology</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../clients/recorder/">Docker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../privacy/">Privacy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../people/">People</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ideas/">Ideas</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../faq/">Answers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../press/">Press</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OwnTracks Booklet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Android</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/owntracks" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="general-restrictions-on-android-6-and-higher">General Restrictions on Android 6 and higher.</h2>
<p>Since Android 6 and higher, the operating systems enforces stricter restrictions for apps running in the background. Most importantly, network access and background jobs are restricted to certain time slots. As a result, certain features might be restricted when the app is not actively used. This also applies if OwnTracks is exluded from battery optimizations.</p>
<ul>
<li>It is highly recommended to use HTTP mode on Android 6 and higher.</li>
<li>The ongoing notification is required to run in the background.</li>
<li>App standby or battery optimization may interfere with OwnTracks due to broken implementation on some devices. It is recommended to disable the Android battery optimization feature for OwnTracks in Settings &gt; Battery &gt; Battery Optimization.</li>
<li>Outgoing messages will only be sent in batched intervals. Location updates or event messages may be delayed.</li>
<li>Incoming messages such as events might be delayed.</li>
<li>When using MQTT, the broker connection is not maintained permanently. A reconnect will be attempted regularly or when a message is sent. Changing the keepalive interval does not change this behavior. If the connection is established without the clean session flag, missed messages will be received once connected.</li>
<li>The app cannot attempt to connect if the network connection changes because it is not possible to receive the network change event.</li>
<li>Beacons are no long supported in OwnTracks for Android</li>
</ul>
<h2 id="vendor-background-restrictions">Vendor background restrictions</h2>
<p>Certain vendors have their own restrictions for apps running in the background. On these devices, Owntracks might be killed even though it behaves according to the official Android background execution limits.</p>
<p>A list of vendors known to interfer with background apps and a number of workarounds can be found at <a href="https://dontkillmyapp.com/">Don’t kill my app!</a>.</p>
<h2 id="google-play-services">Google Play Services</h2>
<p>Google Play Services are required to use OwnTracks. There are no plans to remove the dependency.</p>
<p>They are used for
* Battery efficient location access
* Geofencing
* Scheduling of background jobs
* Resolving coordinates to addresses (an alterative Geocoding service can be configured)
* Displaying the map</p>
<h2 id="setup">Setup</h2>
<p>In the unlikely case that your broker does not require a username and password, you can disable authentication in the configuration editor. Please note that even then, you have to set a device name and username before you can connect as these are also used to construct various other internal things.</p>
<p>By default a <a href="../tls/">TLS</a> secured communication channel with the broker is assumed. Thus you have to ensure that the broker certificate is properly imported on your device.</p>
<p>In recent Android versions, a passcode is required once custom TLS certificates are imported. If you want to circumvent this, you can enable TLS with custom certificates and import that into the private storage location of the app. This will circumvent the Android TLS certificate management by using the certificate directly and skipping any other certificates known to the system.</p>
<p>In HTTP mode the <code>url</code> is required to connect.
In MQTT mode the <code>host</code> and <code>username</code>  and <code>password</code> is required to connect.</p>
<h2 id="debug-log">Debug Log</h2>
<p>Since Owntracks 2.1.2 application logs can be exported easily to assist in debugging problems with the app.</p>
<p>To generate the logs, follow the next steps:</p>
<ul>
<li>Temporarily grant write access to local storage. Go to Android App Info &gt; Permissions and enable the storage permission.</li>
<li>Open the configuration editor at <em>Preferences</em> &gt; <em>Configuration Management</em> &gt; <em>Menu</em> on the right top &gt; Editor</li>
<li>Under key enter <code>debugLog</code></li>
<li>As value enter <code>true</code></li>
<li>Restart the app at Menu on the right top &gt; <em>Restart</em>.</li>
</ul>
<p>Application logs are written to the local storage and can be viewed in <em>Status</em> -&gt; <em>View Logs</em>, from which they can be exported or shared via typical Android functions, e.g. by Mail.</p>
<p>Enabled logging degrades application performance, so it should be disabled after gathering enough information. To do so, follow the steps above but enter <code>false</code> as value in the configuration editor.</p>
<h2 id="automation-via-tasker-automagic-etc">Automation via Tasker, Automagic, etc.</h2>
<p>Since Owntracks 2.1 it is possible to automate changes to the location monitoring mode by sending Owntracks an intent. You can change the mode to one of the following pre-defined <a href="https://owntracks.org/booklet/features/location/">modes</a>: <code>Move</code>, <code>Significant location change</code>,<code>Manual</code>,<code>Quiet</code>.</p>
<p>To set modes, use the same example as provided below and simply substitute the Extra in the table that corresponds to the desired state of Owntracks into the first Extra field of the Intent Action.  Do not put any text into the fields listed as [LEAVE FIELD BLANK] above.</p>
<h3 id="tasker-example">Tasker example:</h3>
<p>To trigger <code>Move</code> mode in tasker, create a <code>Send Intent</code> action and enter the following information:</p>
<ul>
<li>Action: <code>org.owntracks.android.CHANGE_MONITORING</code></li>
<li>Cat: <code>None</code></li>
<li>Mime Type: [LEAVE FIELD BLANK]</li>
<li>Data: [LEAVE FIELD BLANK]</li>
<li>Extra(1): <code>monitoring:2</code></li>
<li>Extra(2): [LEAVE FIELD BLANK]</li>
<li>Extra(3): [LEAVE FIELD BLANK]</li>
<li>Package: [LEAVE FIELD BLANK]</li>
<li>Class: [LEAVE FIELD BLANK]</li>
<li>Target: <code>Service</code></li>
</ul>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Send This Extra Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Quiet</td>
<td><code>monitoring:-1</code></td>
</tr>
<tr>
<td>Manual</td>
<td><code>monitoring:0</code></td>
</tr>
<tr>
<td>Significant Changes</td>
<td><code>monitoring:1</code></td>
</tr>
<tr>
<td>Move</td>
<td><code>monitoring:2</code></td>
</tr>
</tbody>
</table>
<h3 id="automagic-example">Automagic example:</h3>
<p>To trigger <code>Move</code> mode in Automagic, create a <code>Start Service</code> action and enter the following information:</p>
<ul>
<li>Action: <code>org.owntracks.android.CHANGE_MONITORING</code></li>
<li>Category List: [LEAVE FIELD BLANK]</li>
<li>Data URI: [LEAVE FIELD BLANK]</li>
<li>Data MIME Type: [LEAVE FIELD BLANK]</li>
<li>Explicit Component: ticked</li>
<li>Package Name: <code>org.owntracks.android</code></li>
<li>Class Name: [LEAVE FIELD BLANK]</li>
<li>Flag List: [LEAVE FIELD BLANK]</li>
<li>Extra: <code>putInt("MONITORING": 2)</code></li>
</ul>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Send This Extra Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Quiet</td>
<td><code>putInt("monitoring": -1)</code></td>
</tr>
<tr>
<td>Manual</td>
<td><code>putInt("monitoring": 0)</code></td>
</tr>
<tr>
<td>Significant Changes</td>
<td><code>putInt("monitoring": 1)</code></td>
</tr>
<tr>
<td>Move</td>
<td><code>putInt("monitoring": 2)</code></td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../security/" class="btn btn-neutral float-right" title="Security"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ios/" class="btn btn-neutral" title="iOS"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../ios/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../security/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
