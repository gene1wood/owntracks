<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Clients - OwnTracks Booklet</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/custom.css" rel="stylesheet">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OwnTracks Booklet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Intro</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../whathow/">What it does</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Clients</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#clients">Clients</a></li>
                
            
                <li class="toctree-l3"><a href="#mosquitto_sub">mosquitto_sub</a></li>
                
            
                <li class="toctree-l3"><a href="#recorder">Recorder</a></li>
                
            
                <li class="toctree-l3"><a href="#mqttwarn">mqttwarn</a></li>
                
            
                <li class="toctree-l3"><a href="#openhab">openHAB</a></li>
                
            
                <li class="toctree-l3"><a href="#home-assistant">Home Assistant</a></li>
                
            
                <li class="toctree-l3"><a href="#owntracks-cards">OwnTracks-Cards</a></li>
                
            
                <li class="toctree-l3"><a href="#roll-your-own">Roll your own</a></li>
                
            
                <li class="toctree-l3"><a href="#related">Related</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../scenarios/">Scenarios</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apps/">Apps</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../topics/">Topics</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../broker/">Broker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../bridge/">Bridging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../beacons/">Beacons</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/comparison/">Comparison</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/ios/">iOS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/android/">Android</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/tls/">TLS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/tlscert/">TLS client</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/location/">Location</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/tid/">Tracker ID</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/friends/">Friends</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/card/">Card</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/waypoints/">Waypoints</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/beacons/">Beacons</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/pedometer/">Pedometer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/featured/">Featured</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/encrypt/">Encryption</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/remoteconfig/">Remoteconfig</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/debug/">Debugging</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/traccar/">Traccar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/json/">JSON</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/http/">HTTP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/mqtt/">MQTT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/qr/">QR</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tech/program/">Code</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Sundry</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../terminology/">Terminology</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../clients/recorder/">Docker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../privacy/">Privacy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../people/">People</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ideas/">Ideas</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../faq/">Answers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../press/">Press</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OwnTracks Booklet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Guide &raquo;</li>
        
      
    
    <li>Clients</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/owntracks" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="clients">Clients</h2>
<p>Using our OwnTracks app is cool, but what do you do with the location data the apps send (i.e. <em>publish</em>) to the MQTT broker? We have some suggestions.</p>
<p>You know that OwnTracks <em>publishes</em> location information to an MQTT or HTTP endpoint. The data it publishes is transferred in a particular format called <a href="http://json.org">JSON</a>, and <a href="../../tech/json/">this is what it looks like</a>.</p>
<p>When you've got your endpoint set up, and OwnTracks configured to use it, you'll want to do something useful with the data, and the following sections introduce you to some of the existing clients you can utilize for doing that.</p>
<h2 id="mosquitto_sub">mosquitto_sub</h2>
<p><em>mosquitto_sub</em> is a very basic command-line client provided by the <a href="http://mosquitto.org">Mosquitto project</a>. However, it is brilliantly useful, and you can also use it for long-time collection of data by having it run in the background with <em>stdout</em> pointing to a file.</p>
<p>In it's most basic invocation, you have the program connect to your broker and subscribe to the topics you're interested in.</p>
<pre><code class="bash">mosquitto_sub -h localhost -p 1883 -v -t 'owntracks/#'
</code></pre>

<p><em>mosquitto_sub</em> and it's counterpart, <em>mosquitto_pub</em> for publishing to a broker, support a slew of options. It'll be worth your while to study their <a href="http://mosquitto.org/man/mosquitto_sub-1.html">manual page</a>.</p>
<h2 id="recorder">Recorder</h2>
<p>We recommend our very own <a href="https://github.com/owntracks/recorder">OwnTracks Recorder</a> because it's lightweight, relatively simple to set up, and because it offers a lot of features. It stores location data published by the apps by subscribing to an MQTT broker, and it enables you to access that data in a variety of formats. The best part is: it doesn't require a heavy external database of any kind.</p>
<p><img alt="Recorder" src="../images/demo-geojson-linestring.png" /></p>
<p>And the best is, you can configure the Recorder to also accept the HTTP POST requests from the apps, so it's the best companion for the OwnTracks apps in HTTP mode as well.</p>
<p>Read <a href="../../clients/recorder/">more about the Recorder</a>.</p>
<h2 id="mqttwarn">mqttwarn</h2>
<p>You'll recall (we hope) the discussion on <a href="mqtt.md">MQTT</a> and the analogy with the cauldron. <em>mqttwarn</em>, while not specific to OwnTracks, is another client you connect to your <a href="../broker/">MQTT broker</a>. We think it's worth mentioning (and both Ben and JP -- the creators -- are quite pleased with what it does).</p>
<p><em>mqttwarn</em> lets you do things like tweet everytime OwnTracks reports a location (but do consider whether you <em>really</em> want that), send an e-mail when a loved one enters a particular region, etc.</p>
<h2 id="openhab">openHAB</h2>
<p>Presence detection in home automation is one of the most important pieces of the puzzle. Without it your smart home is effectively blind, and as a result can hardly be called 'smart' at all. There are very few automation rules that do not require some form of context in terms of human occupancy. Rules around security, lighting, music, even coffee machines -- all need to know if 'someone' is home before deciding whether to take action. </p>
<p><img alt="openHAB" src="../images/openhab.png" /></p>
<p>This is where OwnTracks steps in. In its simplest form it can be configured with waypoints (for home/work etc) that generate events whenever your phone enters/leaves these regions. These are sent to your own personal <a href="../broker/">MQTT broker</a> where your home automation software can react accordingly. The beauty of OwnTracks is two-fold - it is simple, you can disable the standard location reporting so all you get is the waypoint event/leave events, which is all your smart home cares about. The second is that, in <a href="../scenarios/"><em>private mode</em></a>, all your data is 'yours' and yours alone - there is no cloud service collecting, storing and potentially mining your data. </p>
<p>Read more about <a href="https://github.com/openhab/openhab/wiki/Mqttitude-Binding">openHAB and OwnTracks</a>.</p>
<h2 id="home-assistant">Home Assistant</h2>
<p>Another home automation solution that can be used with OwnTracks is Home Assistant. Home Assistant allows you to track the location of people connected to your personal <a href="../broker/">MQTT broker</a>. It has a map to show their current location and can trigger automations based on entering and leaving zones. In order to use the internal broker of Home Assistant, the MQTT protocol level has to be set to 4. </p>
<p>See the <a href="https://home-assistant.io/demo/">demo</a> for an example of the map with OwnTracks devices or read more about how Home Assistant <a href="https://home-assistant.io/components/mqtt/">connects to your private MQTT broker</a>, how to <a href="https://home-assistant.io/components/device_tracker.owntracks/">enable OwnTracks support in Home Assistant</a> and how to <a href="https://home-assistant.io/components/automation/#zone-trigger">configure automations based on zones</a>.</p>
<h2 id="owntracks-cards">OwnTracks-Cards</h2>
<p>This is a webapp to create and edit <a href=".../features/card.md">OwnTracks cards</a>.
It can be either used to just create the JSON representation of the card, which has to be published to the MQTT broker manually. Or it can directly publish the card to an MQTT broker connected via websockets.
Just head over to the <a href="https://avanc.github.io/owntracks-cards/">demo</a> and create a card. Configure your MQTT broker by clicking the connection state.
The source code can be found on <a href="https://github.com/avanc/owntracks-cards">Github</a>.</p>
<h2 id="roll-your-own">Roll your own</h2>
<p>If you feel really brave, you can <a href="../../tech/program/">write your own program</a> which subscribes to OwnTracks data, but don't forget to tell us about it!</p>
<h2 id="related">Related</h2>
<p>Here are some projects we know of which use and/or integrate OwnTracks and/or
which are useful when using MQTT in general or OwnTracks in particular.</p>
<ul>
<li><a href="http://jpmens.net/2013/11/19/mqtt-inspector-for-ios/">MQTT Inspector for iOS</a>, written by Christoph Krey, who also did our OwnTracks for iOS app. This is an indispensable utility for all things MQTT.</li>
<li><a href="http://thethingsystem.com">the thing system</a> ( <a href="https://github.com/TheThingSystem/steward">code</a> )</li>
<li>A Clojure webapp that aims to manage information gathered from OwnTracks; <a href="https://github.com/razorinc/clojure-mqttitude-backend">clojure-mqttitude-backend</a></li>
<li>An <a href="http://flows.nodered.org/flow/ab31cd939f2e73503fb0">OwnTracks flow</a> by <a href="https://twitter.com/juzam">Giovanni @juzam Angoli</a> for Node-RED which publishes messages to <a href="https://pushover.net">pushover.net</a> upon entering or leaving a geo-fence.</li>
<li><a href="https://play.google.com/store/apps/details?id=at.tripwire.mqtt.client">MyMQTT</a> is an app for Android which enables you to subscribe and publish to an MQTT broker.</li>
<li>Matthew Bordignon made a small <a href="https://github.com/matbor/Owntracks-Barometer">Web page which uses Websockets to display the barometer reading</a> published by OwnTracks for iOS. (<a href="https://twitter.com/OwnTracks/status/623823420053172224">Screenshot</a>.)</li>
<li><a href="https://github.com/tomyvi/php-owntracks-recorder">PHP front &amp; backend for OwnTracks payloads</a></li>
<li>Orion, an alternative to OwnTracks Recorder with powerful visualization features (<a href="https://github.com/LINKIWI/orion-server">server</a>, <a href="https://github.com/LINKIWI/orion-web">web client</a>, <a href="https://linkiwi.github.io/orion-web">demo</a>)</li>
<li><a href="https://github.com/wansti/OwntracksOSM">OwntracksOSM</a> is an Owntracks and OpenStreetMap based mapping and location sharing app for Samsung smartwatches (<a href="https://github.com/owntracks/talk/issues/80">screenshots</a>).</li>
<li><a href="https://www.cron.dk/from-owntrack-to-qgis-part-1/">From OwnTracks to QGIS</a>, a solution to import OwnTracks data into QGIS.</li>
<li><a href="https://github.com/BrianHepler/MMM-WeasleyClock">Magic Mirror module for displaying results from OpenTracks</a></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../scenarios/" class="btn btn-neutral float-right" title="Scenarios"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../whathow/" class="btn btn-neutral" title="What it does"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../whathow/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../scenarios/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
